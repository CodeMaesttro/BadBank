{% extends "base.html" %}

{% block title %}BadBank - Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container">
    <div class="welcome-section">
        <h2>Welcome, {{ user.full_name }}!</h2>
        <p>Account Number: {{ account.account_number }}</p>
        <p><small>User ID: {{ user.id }} | Account ID: {{ account.id }}</small></p>
    </div>
    
    <div class="dashboard-grid">
        <div class="balance-card">
            <h3>Account Balance</h3>
            <div class="balance-amount">${{ "%.2f"|format(account.balance) }}</div>
            <p class="account-type">{{ account.account_type|title }} Account</p>
        </div>
        
        <div class="quick-actions">
            <h3>Quick Actions</h3>
            <div class="action-buttons">
                <a href="{{ url_for('transfer') }}" class="btn btn-primary">Transfer Money</a>
                <a href="{{ url_for('transactions') }}" class="btn btn-secondary">View All Transactions</a>
                <a href="{{ url_for('profile') }}" class="btn btn-secondary">Update Profile</a>
            </div>
        </div>
    </div>
    
    <div class="recent-transactions">
        <h3>Recent Transactions</h3>
        {% if transactions %}
            <div class="transaction-list">
                {% for transaction in transactions %}
                    <div class="transaction-item">
                        <div class="transaction-info">
                            <div class="transaction-type">
                                {% if transaction.from_account_id == account.id %}
                                    <span class="outgoing">→ To: {{ transaction.to_user_name }}</span>
                                {% else %}
                                    <span class="incoming">← From: {{ transaction.from_user_name }}</span>
                                {% endif %}
                            </div>
                            <div class="transaction-description">{{ transaction.description|safe or 'No description' }}</div>
                            <div class="transaction-date">{{ transaction.created_at }}</div>
                        </div>
                        <div class="transaction-amount">
                            {% if transaction.from_account_id == account.id %}
                                <span class="amount-negative">-${{ "%.2f"|format(transaction.amount) }}</span>
                            {% else %}
                                <span class="amount-positive">+${{ "%.2f"|format(transaction.amount) }}</span>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div class="view-all-link">
                <a href="{{ url_for('transactions') }}">View All Transactions →</a>
            </div>
        {% else %}
            <p class="no-transactions">No transactions yet. <a href="{{ url_for('transfer') }}">Make your first transfer!</a></p>
        {% endif %}
    </div>
</div>
{% endblock %}