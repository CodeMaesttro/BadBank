{% extends "base.html" %}

{% block title %}BadBank - Profile{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-form">
        <h2>Your Profile</h2>
        <form method="POST">
            <!-- Expose user_id in hidden field -->
            <input type="hidden" name="user_id" value="{{ user.id }}">
            <input type="hidden" name="account_id" value="{{ session.user_id }}">
            
            <div class="form-group">
                <label for="username">Username:</label>
                <input type="text" id="username" name="username" value="{{ user.username }}" disabled>
                <small class="form-help">Username cannot be changed. (User ID: {{ user.id }})</small>
            </div>
            
            <div class="form-group">
                <label for="full_name">Full Name:</label>
                <input type="text" id="full_name" name="full_name" value="{{ user.full_name }}" required>
            </div>
            
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" value="{{ user.email }}" required>
            </div>
            
            <div class="form-group">
                <label for="phone">Phone Number:</label>
                <input type="tel" id="phone" name="phone" value="{{ user.phone or '' }}">
            </div>
            
            <div class="form-group">
                <label for="address">Address:</label>
                <textarea id="address" name="address" rows="3">{{ user.address or '' }}</textarea>
            </div>
            
            <button type="submit" class="btn btn-primary btn-full">Update Profile</button>
        </form>
        
        <div class="profile-info">
            <h4>Account Information</h4>
            <p><strong>Member since:</strong> {{ user.created_at }}</p>
            <p><strong>Last login:</strong> {{ user.last_login or 'Never' }}</p>
            <p><strong>Account status:</strong> 
                {% if user.is_active %}
                    <span class="status-active">Active</span>
                {% else %}
                    <span class="status-inactive">Inactive</span>
                {% endif %}
            </p>
        </div>
    </div>
</div>
{% endblock %}